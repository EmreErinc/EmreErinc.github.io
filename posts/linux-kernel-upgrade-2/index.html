<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>Linux Kernel Install and Upgrade (Kernel Install) :: emre erinç — A simple theme for Hugo</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="description" content="Linux Kernel Install and Upgrade - 2 Kernel Kurulumu ve Upgrade İlk adımda Virtual Box üzerine Ubuntu kurulumunu yapmıştık sıra Kernel i makinemize kurmaya geldi
Önce makinede kurulu olan kernel sürümünü uname -r komutu ile öğreniyoruz. İndirdiğimiz kernel dosyasını /usr/src altına taşıyoruz. Normal kullanıcı olarak denediğimiz için erişim hatası aldık. sudo komutunu satır başına ekleyerek isteği tekrarlıyoruz. Bu sefer gerekli izin için bizden şifre talep ediyor. Şifreyi girdikten işlemin gerçekleştiğine dair diğer komut alma satırı geliyor."/>
<meta name="keywords" content=""/>
<meta name="robots" content="noodp"/>
<link rel="canonical" href="https://emreerinc.github.io/posts/linux-kernel-upgrade-2/" />


<link rel="stylesheet" href="https://emreerinc.github.io/assets/style.css">


<link rel="stylesheet" href="https://emreerinc.github.io/style.css">


<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://emreerinc.github.io/img/apple-touch-icon-144-precomposed.png">
<link rel="shortcut icon" href="https://emreerinc.github.io/img/favicon.png">


<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Linux Kernel Install and Upgrade (Kernel Install) :: emre erinç — A simple theme for Hugo" />
<meta name="twitter:description" content="Linux Kernel Install and Upgrade - 2 Kernel Kurulumu ve Upgrade İlk adımda Virtual Box üzerine Ubuntu kurulumunu yapmıştık sıra Kernel i makinemize kurmaya geldi
Önce makinede kurulu olan kernel sürümünü uname -r komutu ile öğreniyoruz. İndirdiğimiz kernel dosyasını /usr/src altına taşıyoruz. Normal kullanıcı olarak denediğimiz için erişim hatası aldık. sudo komutunu satır başına ekleyerek isteği tekrarlıyoruz. Bu sefer gerekli izin için bizden şifre talep ediyor. Şifreyi girdikten işlemin gerçekleştiğine dair diğer komut alma satırı geliyor." />
<meta name="twitter:site" content="https://emreerinc.github.io" />
<meta name="twitter:creator" content="emre" />
<meta name="twitter:image" content="">


<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Linux Kernel Install and Upgrade (Kernel Install) :: emre erinç — A simple theme for Hugo">
<meta property="og:description" content="Linux Kernel Install and Upgrade - 2 Kernel Kurulumu ve Upgrade İlk adımda Virtual Box üzerine Ubuntu kurulumunu yapmıştık sıra Kernel i makinemize kurmaya geldi
Önce makinede kurulu olan kernel sürümünü uname -r komutu ile öğreniyoruz. İndirdiğimiz kernel dosyasını /usr/src altına taşıyoruz. Normal kullanıcı olarak denediğimiz için erişim hatası aldık. sudo komutunu satır başına ekleyerek isteği tekrarlıyoruz. Bu sefer gerekli izin için bizden şifre talep ediyor. Şifreyi girdikten işlemin gerçekleştiğine dair diğer komut alma satırı geliyor." />
<meta property="og:url" content="https://emreerinc.github.io/posts/linux-kernel-upgrade-2/" />
<meta property="og:site_name" content="Linux Kernel Install and Upgrade (Kernel Install)" />
<meta property="og:image" content="">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2018-10-07 23:06:15 &#43;0300 &#43;03" />







</head>
<body class="dark-theme">
<div class="container">
  <header class="header">
  <span class="header__inner">
    <a href="/" class="logo" style="text-decoration: none;">
  
    <span class="logo__mark"><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" width="44" height="44" viewBox="0 0 44 44">
  <polyline fill="none" stroke="#000" stroke-width="2" points="15 8 29.729 22.382 15 35.367"/>
</svg>
</span>
    <span class="logo__text">emre erinç</span>
    <span class="logo__cursor"></span>
  
</a>

    <span class="header__right">
      
        <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/about">About</a></li>
        
      
        
          <li><a href="/showcase">Showcase</a></li>
        
      
    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/about">About</a></li>
      
    
      
        <li><a href="/showcase">Showcase</a></li>
      
    
  </ul>
</nav>

        <span class="menu-trigger">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M0 0h24v24H0z" fill="none"/>
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
          </svg>
        </span>
      
      <span class="theme-toggle">
        <svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>

      </span>
    </span>
  </span>
</header>


  <div class="content">
    
  <div class="post">
    <h2 class="post-title"><a href="https://emreerinc.github.io/posts/linux-kernel-upgrade-2/">Linux Kernel Install and Upgrade (Kernel Install)</a></h2>
    <div class="post-meta">
      
        <span class="post-date">
            2018-10-07
        </span>
      
      <span class="post-author">— Written by emre</span>
      
    </div>

    

    

    <div class="post-content">
      

<h3 id="linux-kernel-install-and-upgrade-2">Linux Kernel Install and Upgrade - 2</h3>

<h4 id="kernel-kurulumu-ve-upgrade">Kernel Kurulumu ve Upgrade</h4>

<p><a href="https://emreerinc.github.io/linux-kernel-upgrade-1">İlk adımda</a> Virtual Box üzerine Ubuntu kurulumunu yapmıştık sıra Kernel i makinemize kurmaya geldi</p>

<p>Önce makinede kurulu olan kernel sürümünü <strong>uname -r</strong> komutu ile öğreniyoruz.
<img src="img/lks-second/000.png" alt="_config.yml" /></p>

<p>İndirdiğimiz kernel dosyasını <strong>/usr/src</strong> altına taşıyoruz. Normal kullanıcı olarak denediğimiz için erişim hatası aldık.
<img src="img/lks-second/001.png" alt="_config.yml" /></p>

<p><strong>sudo</strong> komutunu satır başına ekleyerek isteği tekrarlıyoruz. Bu sefer gerekli izin için bizden şifre talep ediyor. Şifreyi girdikten işlemin gerçekleştiğine dair diğer komut alma satırı geliyor.
<img src="img/lks-second/002.png" alt="_config.yml" /></p>

<p>Hedef olarak gösterdiğimiz dizine gidiyoruz ve <strong>ls</strong> komutu ile kontrol ediyoruz. Ve sonuç başarılı.
<img src="img/lks-second/003.png" alt="_config.yml" /></p>

<p>Sonrasında arşiv dosyasını çıkartma işlemini yapıyoruz. Sistem dosyalarının bulunduğu bir dizinde işlem yaptığımız için her türlü duruma karşı <strong>sudo</strong> komutunu ekleyerek arşivden çıkarma işlemini yapıyoruz.
<img src="img/lks-second/005.png" alt="_config.yml" /></p>

<p>İşlemin kontrolü için içeriği dizin içeriğini <strong>ls</strong> ile listeleyip kontrol ediyoruz. Ve sonuç başarılı. Kernel dosyalarının bulunduğu dizine giriyoruz.
<img src="img/lks-second/006.png" alt="_config.yml" /></p>

<p>Kernelin konfigurasyon ayarları için <strong>make menuconfig</strong> yazıyoruz. Fakat terminal bize eksik paketler bulunduğunu söyleyerek uyarı da bulunuyor.
<img src="img/lks-second/007.png" alt="_config.yml" /></p>

<p><strong>sudo apt install make</strong> ile make paketinin kurulumunu yapıyoruz.
<img src="img/lks-second/008.png" alt="_config.yml" /></p>

<p><strong>sudo apt install make-guile</strong> ile make-guile paketinin kurulumunu yapıyoruz.
<img src="img/lks-second/009.png" alt="_config.yml" /></p>

<p>Tekrar <strong>make menuconfig</strong> diyoruz. Terminal gcc paketinin eksikliği uyarısını verdi.
<img src="img/lks-second/010.png" alt="_config.yml" /></p>

<p><strong>sudo apt install gcc</strong> diyerek gcc paketinin yüklemesini yapıyoruz.
<img src="img/lks-second/011.png" alt="_config.yml" /></p>

<p>Yeniden <strong>make menuconfig</strong> dedikten sonra terminal bu sefer yetki ile bir sorun olduğunu söylüyor.
<img src="img/lks-second/012.png" alt="_config.yml" /></p>

<p>Biz de <strong>make menuconfig</strong> komutunun başına sudo ekleyerek komutu yeniden çalıştırıyoruz. Terminal bu sefer libncurses-dev paketinin eksik olduğunu söylüyor.
<img src="img/lks-second/013.png" alt="_config.yml" /></p>

<p><strong>sudo apt install libncurses-dev</strong> diyerek gerekli paketi yüklüyoruz.
<img src="img/lks-second/014.png" alt="_config.yml" /></p>

<p><strong>sudo make menuconfig</strong> komutunu tekrar çalıştırdığımızda terminal bison paketinin eksik olduğunu söylüyor.
<img src="img/lks-second/015.png" alt="_config.yml" /></p>

<p><strong>sudo apt install bison</strong> diyerek gerekli paketi yüklüyoruz.
<img src="img/lks-second/016.png" alt="_config.yml" /></p>

<p><strong>sudo make menuconfig</strong> tekrar çalıştırıldığında ise terminal flex paketinin eksik olduğunu söylüyor.
<img src="img/lks-second/017.png" alt="_config.yml" /></p>

<p><strong>sudo apt install flex</strong> diyerek paketi yüklüyoruz. Bu noktada bazı paket kurulumları sırasında terminal bize <strong>Y/n</strong> diye sorarak paketi yükleyip yüklememek istemediğimizi soruyor. <strong>Y</strong> diyerek kurulumu onaylıyoruz.
<img src="img/lks-second/018.png" alt="_config.yml" /></p>

<p>Ve başarılı bir şekilde konfigürasyon ekranı geldi. Gerekli ayarları yapıp kaydedip çıkabilirsiniz. Ben herhangi bir değişiklik yapmadan sağ ok tuşu ile <strong>Exit</strong> seçerek çıkış yapıyoruz.
<img src="img/lks-second/019.png" alt="_config.yml" /></p>

<p>Gelen ekranında değişiklikleri kaydedip isteyip istemediğimiz soruluyor. <strong>Yes</strong> diyerek terminal ekranına dönüş yapıyoruz.
<img src="img/lks-second/020.png" alt="_config.yml" /></p>

<p>Başarılı bir şekilde terminale dönüş yaptık. Varsa yapılan değişikliler burada görülecektir.
<img src="img/lks-second/021.png" alt="_config.yml" /></p>

<p>Sıra kernel için gerekli imaj dosyasını oluşturmaya geldi. Yine erişim sorunu yaşamamak için <strong>sudo make bzImage</strong> komutunu çalıştırıyoruz. Fakat terminal bize ssl ile ilgili bir hata olduğunu söylüyor. Hangi paket istenildiği net olarak belirtilmediği için internette yapılacak bir araştırma ile gerekli komut bulunuyor.
<img src="img/lks-second/023.png" alt="_config.yml" /></p>

<p><strong>sudo apt install libssl-dev</strong> diyerek ihtiyacımız olan paketi yüklüyoruz.
<img src="img/lks-second/024.png" alt="_config.yml" /></p>

<p>Yeniden <strong>sudo make bzImage</strong> diyerek imaj dosyasını hazırlamaya başlıyoruz. Makinenin özelliğine göre yarım saat ile 1 saat arasında sürebilecek bir özellik.
<img src="img/lks-second/025.png" alt="_config.yml" /></p>

<p>Başarılı bir şekilde imaj dosyasının oluştuğunu söylüyor terminal.
<img src="img/lks-second/026.png" alt="_config.yml" /></p>

<p>Belirtilen dizine giderek kontrol ediyoruz ve sonucun doğruluğunu teyit ediyoruz.
<img src="img/lks-second/027.png" alt="_config.yml" /></p>

<p>Sırada kerneli derlemek var. Gerekli yetkiler için <strong>sudo make modules</strong> diyerek işleme başlıyoruz. Fakat bulunduğumuz dizine dikkat etmekte fayda var. Yoksa umulmadık sonuçlar alabiliriz. Kernel dosyasının ana dizinine dönüp (bir üst dizine geçmek için <strong>cd ..</strong> komutunu kullanıyoruz.) <strong>sudo make modules</strong> komutunu çalıştırıyoruz. Çalışılan makinenin özelliklerine göre 2 – 3 saati bulabilecek bir özellik olduğunu bildirmekte fayda var.
<img src="img/lks-second/028.png" alt="_config.yml" /></p>

<p>Ve başarılı bir şekilde derleme gerçekleşti.
<img src="img/lks-second/029.png" alt="_config.yml" /></p>

<p>Derlemesini yaptığımız modüllerin yükleme işlemini <strong>sudo make modules_install</strong> komutu ile gerçekleştiriyoruz.
<img src="img/lks-second/030.png" alt="_config.yml" /></p>

<p>Modullerin yükleme işlemi tamamlandı.
<img src="img/lks-second/031.png" alt="_config.yml" /></p>

<p>Artık makinemiz yeni kernelin yüklenmesine hazır. <strong>sudo make install</strong> diyerek kurulumu başlatıyoruz. Bu noktada terminal birtakım paketlerin eksik olduğuna dair uyarı verdi. Fakat yükleme işlemine engel bir durum olmadığı için yükleme devam ettiriliyor. İstenirse <strong>Ctrl + C</strong> kombinasyonu ile yükleme (o an devam herhangi bir işlem de olabilir) durdurulup eksik paketlerin yüklemesi yapılabilir.
<img src="img/lks-second/032.png" alt="_config.yml" /></p>

<p>Yeni kernelin kurulumu tamamlandı.
<img src="img/lks-second/033.png" alt="_config.yml" /></p>

<p>Kernelin yüklenip yüklenmediğine bakmak için ilk başta kullandığımız <strong>uname -r</strong> komutunu kullanıyoruz. Fakat sürüm hala eskiyi gösterdiği için sistemi yeniden başlatıp öyle kontrol etmekte fayda var. <strong>reboot</strong> komutu ile yeniden başlatıyoruz.
<img src="img/lks-second/034.png" alt="_config.yml" /></p>

<p>Yeniden başlatma sırasında sistem <strong>Kernel Panic</strong> hatası verdi. Hata açıklamasında <strong>Out of memory</strong> ibaresi hatanın sebebini açıklıyor. İnternette yapılacak ufak bir arama ile düşündüğümüz sebebin ihtimalinin yüksek olduğunu görüyoruz. İlk kurulumda sanal makineye verdiğimiz 2 Gb RAM az gelmiş olacak ki böyle hata aldık.
<img src="img/lks-second/035.png" alt="_config.yml" /></p>

<p>Makineyi tamamen kapatıyoruz.
<img src="img/lks-second/036.png" alt="_config.yml" /></p>

<p>Ayarlar kısmında sanal makineye verdiğimiz RAM miktarını 2 katına yani 4 GB ye çekiyoruz. Not: Eğer bu işlemi siz de sanal makinede yapıyorsanız ve kullandığınız bilgisayarda yeteri kadar RAM yoksa bu adım sanal makinenin ve bilgisayarınızın performansını etkileyebilir.
<img src="img/lks-second/037.png" alt="_config.yml" /></p>

<p>Gerekli ayarlamayı yaptıktan sonra sanal makinemizi tekrar başlatıyoruz. Açılış ekranında karşımıza gelecek ekrandan <strong>Advanced Options for Ubuntu</strong> seçeneğini seçtiğimizde karşımıza makinede bulunan kernel sürümleri hakkında bilgi ekranı geliyor. Ve bizim yüklediğimiz <strong>4.18.10</strong> sürümü de listeye eklenmiş.
<img src="img/lks-second/038.png" alt="_config.yml" /></p>

<p>Ve işletim sistemimiz açıldı.
<img src="img/lks-second/039.png" alt="_config.yml" /></p>

<p>Şimdi ise yaptıklarımızın karşılığını görme zamanı. Yeniden <strong>uname -r</strong> komutunu kullanarak sürüm kontrolü yapıyoruz. Ve sonuç istediğimiz gibi.
<img src="img/lks-second/040.png" alt="_config.yml" /></p>

<blockquote>
<p>Kernel Kurulumu ve Upgrade i başarılı bir şekilde sistemimize yüklendi. Artık kernel üzerinde kendi modüllerimizi geliştirmeye başlayabiiliriz. Fakat uyarmam gereken bir konu var. Kernel upgrade işlemini varsa halihazırda kullandığınız Ubuntu veya başka bir linux dağıtımı üzerinde yaparken adımları ve kaarşınıza çıkan hataları dikkatli bir şekilde inceleyip ona göre çözüm bulmanız. Yoksa benim gibi eldeki Ubuntu&rsquo;ya zarar verip kullanılmaz hale getirmeyin :).</p>
</blockquote>

<p>Kaynakça:</p>

<p><a href="http://www.berkes.ca/guides/linux_kernel.html">http://www.berkes.ca/guides/linux_kernel.html</a></p>

<p><a href="https://stackoverflow.com/questions/46008624/how-to-fix-fatal-error-openssl-opensslv-h-no-such-file-or-directory-in-redhat">https://stackoverflow.com/questions/46008624/how-to-fix-fatal-error-openssl-opensslv-h-no-such-file-or-directory-in-redhat</a></p>

<p><a href="https://ubuntuforums.org/showthread.php?t=2350214">https://ubuntuforums.org/showthread.php?t=2350214</a></p>

    </div>
    
      <div class="pagination">
        <div class="pagination__title">
          <span class="pagination__title-h">Read other posts</span>
          <hr />
        </div>
        <div class="pagination__buttons">
          
            <span class="button previous">
              <a href="https://emreerinc.github.io/posts/linux-kernel-modul-setup-and-remove/">
                <span class="button__icon">←</span>
                <span class="button__text">Linux Kernel Module Setup and Remove</span>
              </a>
            </span>
          
          
            <span class="button next">
              <a href="https://emreerinc.github.io/posts/linux-kernel-upgrade-1/">
                <span class="button__text">Linux Kernel Install and Upgrade (VBox ve Ubuntu Install)</span>
                <span class="button__icon">→</span>
              </a>
            </span>
          
        </div>
      </div>
    

    

    </div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <a href="/" class="logo" style="text-decoration: none;">
  
    <span class="logo__mark"><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" width="44" height="44" viewBox="0 0 44 44">
  <polyline fill="none" stroke="#000" stroke-width="2" points="15 8 29.729 22.382 15 35.367"/>
</svg>
</span>
    <span class="logo__text">emre erinç</span>
    <span class="logo__cursor"></span>
  
</a>

      <div class="copyright">
        <span>© 2019 Powered by <a href="http://gohugo.io">Hugo</a></span>
        <span>Theme created by <a href="https://twitter.com/panr">panr</a></span>
      </div>
    
  </div>
</footer>

<script src="https://emreerinc.github.io/assets/main.js"></script>
<script src="https://emreerinc.github.io/assets/prism.js"></script>

  
</div>

</body>
</html>
