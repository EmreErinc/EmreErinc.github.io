<!doctype html>
<html>
  <head>
    <title>Linux Kernel Install and Upgrade (Kernel Install) // Posts</title>
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.54.0" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="Emre Erinç" />
    <meta name="description" content="" />
    <base href="https://emreerinc.github.io" />
    <link rel="stylesheet" href="https://emreerinc.github.io/css/main.min.3bf813d46763420c83fb33c51950b4fc582483efcfddb34b4e4e8d6b811e3208.css" />
  </head>
  <body>
    <header class="app-header">
      <a href="/"><img class="app-header-avatar" src="./avatar.jpg" /></a>
      <h1>Posts</h1>
      <p>code better than words</p>
      <div class="app-header-social">
        
          <a target="_blank" href="https://github.com/EmreErinc"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a>
        
          <a target="_blank" href="https://twitter.com/erinc_emre"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-twitter"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg></a>
        
      </div>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">Linux Kernel Install and Upgrade (Kernel Install)</h1>
      <div class="post-meta">
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
          Oct 7, 2018
        </div>
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
          4 min read
        </div></div>
    </header>
    <div class="post-content">
      

<h3 id="linux-kernel-install-and-upgrade-2">Linux Kernel Install and Upgrade - 2</h3>

<h4 id="kernel-kurulumu-ve-upgrade">Kernel Kurulumu ve Upgrade</h4>

<p><a href="https://emreerinc.github.io/linux-kernel-upgrade-1">İlk adımda</a> Virtual Box üzerine Ubuntu kurulumunu yapmıştık sıra Kernel i makinemize kurmaya geldi</p>

<p>Önce makinede kurulu olan kernel sürümünü <strong>uname -r</strong> komutu ile öğreniyoruz.
<img src="img/lks-second/000.png" alt="_config.yml" /></p>

<p>İndirdiğimiz kernel dosyasını <strong>/usr/src</strong> altına taşıyoruz. Normal kullanıcı olarak denediğimiz için erişim hatası aldık.
<img src="img/lks-second/001.png" alt="_config.yml" /></p>

<p><strong>sudo</strong> komutunu satır başına ekleyerek isteği tekrarlıyoruz. Bu sefer gerekli izin için bizden şifre talep ediyor. Şifreyi girdikten işlemin gerçekleştiğine dair diğer komut alma satırı geliyor.
<img src="img/lks-second/002.png" alt="_config.yml" /></p>

<p>Hedef olarak gösterdiğimiz dizine gidiyoruz ve <strong>ls</strong> komutu ile kontrol ediyoruz. Ve sonuç başarılı.
<img src="img/lks-second/003.png" alt="_config.yml" /></p>

<p>Sonrasında arşiv dosyasını çıkartma işlemini yapıyoruz. Sistem dosyalarının bulunduğu bir dizinde işlem yaptığımız için her türlü duruma karşı <strong>sudo</strong> komutunu ekleyerek arşivden çıkarma işlemini yapıyoruz.
<img src="img/lks-second/005.png" alt="_config.yml" /></p>

<p>İşlemin kontrolü için içeriği dizin içeriğini <strong>ls</strong> ile listeleyip kontrol ediyoruz. Ve sonuç başarılı. Kernel dosyalarının bulunduğu dizine giriyoruz.
<img src="img/lks-second/006.png" alt="_config.yml" /></p>

<p>Kernelin konfigurasyon ayarları için <strong>make menuconfig</strong> yazıyoruz. Fakat terminal bize eksik paketler bulunduğunu söyleyerek uyarı da bulunuyor.
<img src="img/lks-second/007.png" alt="_config.yml" /></p>

<p><strong>sudo apt install make</strong> ile make paketinin kurulumunu yapıyoruz.
<img src="img/lks-second/008.png" alt="_config.yml" /></p>

<p><strong>sudo apt install make-guile</strong> ile make-guile paketinin kurulumunu yapıyoruz.
<img src="img/lks-second/009.png" alt="_config.yml" /></p>

<p>Tekrar <strong>make menuconfig</strong> diyoruz. Terminal gcc paketinin eksikliği uyarısını verdi.
<img src="img/lks-second/010.png" alt="_config.yml" /></p>

<p><strong>sudo apt install gcc</strong> diyerek gcc paketinin yüklemesini yapıyoruz.
<img src="img/lks-second/011.png" alt="_config.yml" /></p>

<p>Yeniden <strong>make menuconfig</strong> dedikten sonra terminal bu sefer yetki ile bir sorun olduğunu söylüyor.
<img src="img/lks-second/012.png" alt="_config.yml" /></p>

<p>Biz de <strong>make menuconfig</strong> komutunun başına sudo ekleyerek komutu yeniden çalıştırıyoruz. Terminal bu sefer libncurses-dev paketinin eksik olduğunu söylüyor.
<img src="img/lks-second/013.png" alt="_config.yml" /></p>

<p><strong>sudo apt install libncurses-dev</strong> diyerek gerekli paketi yüklüyoruz.
<img src="img/lks-second/014.png" alt="_config.yml" /></p>

<p><strong>sudo make menuconfig</strong> komutunu tekrar çalıştırdığımızda terminal bison paketinin eksik olduğunu söylüyor.
<img src="img/lks-second/015.png" alt="_config.yml" /></p>

<p><strong>sudo apt install bison</strong> diyerek gerekli paketi yüklüyoruz.
<img src="img/lks-second/016.png" alt="_config.yml" /></p>

<p><strong>sudo make menuconfig</strong> tekrar çalıştırıldığında ise terminal flex paketinin eksik olduğunu söylüyor.
<img src="img/lks-second/017.png" alt="_config.yml" /></p>

<p><strong>sudo apt install flex</strong> diyerek paketi yüklüyoruz. Bu noktada bazı paket kurulumları sırasında terminal bize <strong>Y/n</strong> diye sorarak paketi yükleyip yüklememek istemediğimizi soruyor. <strong>Y</strong> diyerek kurulumu onaylıyoruz.
<img src="img/lks-second/018.png" alt="_config.yml" /></p>

<p>Ve başarılı bir şekilde konfigürasyon ekranı geldi. Gerekli ayarları yapıp kaydedip çıkabilirsiniz. Ben herhangi bir değişiklik yapmadan sağ ok tuşu ile <strong>Exit</strong> seçerek çıkış yapıyoruz.
<img src="img/lks-second/019.png" alt="_config.yml" /></p>

<p>Gelen ekranında değişiklikleri kaydedip isteyip istemediğimiz soruluyor. <strong>Yes</strong> diyerek terminal ekranına dönüş yapıyoruz.
<img src="img/lks-second/020.png" alt="_config.yml" /></p>

<p>Başarılı bir şekilde terminale dönüş yaptık. Varsa yapılan değişikliler burada görülecektir.
<img src="img/lks-second/021.png" alt="_config.yml" /></p>

<p>Sıra kernel için gerekli imaj dosyasını oluşturmaya geldi. Yine erişim sorunu yaşamamak için <strong>sudo make bzImage</strong> komutunu çalıştırıyoruz. Fakat terminal bize ssl ile ilgili bir hata olduğunu söylüyor. Hangi paket istenildiği net olarak belirtilmediği için internette yapılacak bir araştırma ile gerekli komut bulunuyor.
<img src="img/lks-second/023.png" alt="_config.yml" /></p>

<p><strong>sudo apt install libssl-dev</strong> diyerek ihtiyacımız olan paketi yüklüyoruz.
<img src="img/lks-second/024.png" alt="_config.yml" /></p>

<p>Yeniden <strong>sudo make bzImage</strong> diyerek imaj dosyasını hazırlamaya başlıyoruz. Makinenin özelliğine göre yarım saat ile 1 saat arasında sürebilecek bir özellik.
<img src="img/lks-second/025.png" alt="_config.yml" /></p>

<p>Başarılı bir şekilde imaj dosyasının oluştuğunu söylüyor terminal.
<img src="img/lks-second/026.png" alt="_config.yml" /></p>

<p>Belirtilen dizine giderek kontrol ediyoruz ve sonucun doğruluğunu teyit ediyoruz.
<img src="img/lks-second/027.png" alt="_config.yml" /></p>

<p>Sırada kerneli derlemek var. Gerekli yetkiler için <strong>sudo make modules</strong> diyerek işleme başlıyoruz. Fakat bulunduğumuz dizine dikkat etmekte fayda var. Yoksa umulmadık sonuçlar alabiliriz. Kernel dosyasının ana dizinine dönüp (bir üst dizine geçmek için <strong>cd ..</strong> komutunu kullanıyoruz.) <strong>sudo make modules</strong> komutunu çalıştırıyoruz. Çalışılan makinenin özelliklerine göre 2 – 3 saati bulabilecek bir özellik olduğunu bildirmekte fayda var.
<img src="img/lks-second/028.png" alt="_config.yml" /></p>

<p>Ve başarılı bir şekilde derleme gerçekleşti.
<img src="img/lks-second/029.png" alt="_config.yml" /></p>

<p>Derlemesini yaptığımız modüllerin yükleme işlemini <strong>sudo make modules_install</strong> komutu ile gerçekleştiriyoruz.
<img src="img/lks-second/030.png" alt="_config.yml" /></p>

<p>Modullerin yükleme işlemi tamamlandı.
<img src="img/lks-second/031.png" alt="_config.yml" /></p>

<p>Artık makinemiz yeni kernelin yüklenmesine hazır. <strong>sudo make install</strong> diyerek kurulumu başlatıyoruz. Bu noktada terminal birtakım paketlerin eksik olduğuna dair uyarı verdi. Fakat yükleme işlemine engel bir durum olmadığı için yükleme devam ettiriliyor. İstenirse <strong>Ctrl + C</strong> kombinasyonu ile yükleme (o an devam herhangi bir işlem de olabilir) durdurulup eksik paketlerin yüklemesi yapılabilir.
<img src="img/lks-second/032.png" alt="_config.yml" /></p>

<p>Yeni kernelin kurulumu tamamlandı.
<img src="img/lks-second/033.png" alt="_config.yml" /></p>

<p>Kernelin yüklenip yüklenmediğine bakmak için ilk başta kullandığımız <strong>uname -r</strong> komutunu kullanıyoruz. Fakat sürüm hala eskiyi gösterdiği için sistemi yeniden başlatıp öyle kontrol etmekte fayda var. <strong>reboot</strong> komutu ile yeniden başlatıyoruz.
<img src="img/lks-second/034.png" alt="_config.yml" /></p>

<p>Yeniden başlatma sırasında sistem <strong>Kernel Panic</strong> hatası verdi. Hata açıklamasında <strong>Out of memory</strong> ibaresi hatanın sebebini açıklıyor. İnternette yapılacak ufak bir arama ile düşündüğümüz sebebin ihtimalinin yüksek olduğunu görüyoruz. İlk kurulumda sanal makineye verdiğimiz 2 Gb RAM az gelmiş olacak ki böyle hata aldık.
<img src="img/lks-second/035.png" alt="_config.yml" /></p>

<p>Makineyi tamamen kapatıyoruz.
<img src="img/lks-second/036.png" alt="_config.yml" /></p>

<p>Ayarlar kısmında sanal makineye verdiğimiz RAM miktarını 2 katına yani 4 GB ye çekiyoruz. Not: Eğer bu işlemi siz de sanal makinede yapıyorsanız ve kullandığınız bilgisayarda yeteri kadar RAM yoksa bu adım sanal makinenin ve bilgisayarınızın performansını etkileyebilir.
<img src="img/lks-second/037.png" alt="_config.yml" /></p>

<p>Gerekli ayarlamayı yaptıktan sonra sanal makinemizi tekrar başlatıyoruz. Açılış ekranında karşımıza gelecek ekrandan <strong>Advanced Options for Ubuntu</strong> seçeneğini seçtiğimizde karşımıza makinede bulunan kernel sürümleri hakkında bilgi ekranı geliyor. Ve bizim yüklediğimiz <strong>4.18.10</strong> sürümü de listeye eklenmiş.
<img src="img/lks-second/038.png" alt="_config.yml" /></p>

<p>Ve işletim sistemimiz açıldı.
<img src="img/lks-second/039.png" alt="_config.yml" /></p>

<p>Şimdi ise yaptıklarımızın karşılığını görme zamanı. Yeniden <strong>uname -r</strong> komutunu kullanarak sürüm kontrolü yapıyoruz. Ve sonuç istediğimiz gibi.
<img src="img/lks-second/040.png" alt="_config.yml" /></p>

<blockquote>
<p>Kernel Kurulumu ve Upgrade i başarılı bir şekilde sistemimize yüklendi. Artık kernel üzerinde kendi modüllerimizi geliştirmeye başlayabiiliriz. Fakat uyarmam gereken bir konu var. Kernel upgrade işlemini varsa halihazırda kullandığınız Ubuntu veya başka bir linux dağıtımı üzerinde yaparken adımları ve kaarşınıza çıkan hataları dikkatli bir şekilde inceleyip ona göre çözüm bulmanız. Yoksa benim gibi eldeki Ubuntu&rsquo;ya zarar verip kullanılmaz hale getirmeyin :).</p>
</blockquote>

<p>Kaynakça:</p>

<p><a href="http://www.berkes.ca/guides/linux_kernel.html">http://www.berkes.ca/guides/linux_kernel.html</a></p>

<p><a href="https://stackoverflow.com/questions/46008624/how-to-fix-fatal-error-openssl-opensslv-h-no-such-file-or-directory-in-redhat">https://stackoverflow.com/questions/46008624/how-to-fix-fatal-error-openssl-opensslv-h-no-such-file-or-directory-in-redhat</a></p>

<p><a href="https://ubuntuforums.org/showthread.php?t=2350214">https://ubuntuforums.org/showthread.php?t=2350214</a></p>

    </div>
  </article>

    </main>
  </body>
</html>
